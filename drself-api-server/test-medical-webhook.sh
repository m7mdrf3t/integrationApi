#!/bin/bash

# Set your webhook URL here
WEBHOOK_URL="http://localhost:3000/api/medicalReportWebhook"

# Write the payload to a file
cat <<EOF > payload.json
{
  "type": "UPDATE",
  "table": "medical_reports",
  "record": {
    "id": "627cc941-e6e9-4b56-abc2-e2d9fb475e26",
    "title": "1751759596736_Mahfouz_7_2_25",
    "status": "completed",
    "iv_drip": "Detox Drip 750 ml ff ffv",
    "summary": null,
    "user_id": "52f07a22-842c-4125-bfd0-6b83f4840499",
    "file_url": "https://lluclyumbgjzcfkuyblg.supabase.co/storage/v1/object/public/medical-reports/52f07a22-842c-4125-bfd0-6b83f4840499/1753612512085_1751759596736_Mahfouz_7_2_25.pdf",
    "diet_plan": "[TRUNCATED]",
    "blood_test": "[\"Vitamin D test\"]",
    "created_at": "2025-07-27T10:35:12.608384+00:00",
    "life_style": "[TRUNCATED]",
    "updated_at": "2025-07-29T02:05:23.701239+00:00",
    "description": null,
    "doctor_name": null,
    "report_date": "2025-07-27",
    "hospital_name": null,
    "summary_status": "pending",
    "food_supplement": "[\"Glutathione 250mg Once daily\",\"Vit D 10000 IU - Once daily\"]",
    "life_recommendation": "[TRUNCATED]",
    "summary_generated_at": null
  },
  "schema": "public",
  "old_record": {
    "id": "627cc941-e6e9-4b56-abc2-e2d9fb475e26",
    "title": "1751759596736_Mahfouz_7_2_25",
    "status": "completed",
    "iv_drip": "Detox Drip 750 ml ff ffvgfgfgbgbv jjjjj njnjbj jjjjj",
    "summary": null,
    "user_id": "52f07a22-842c-4125-bfd0-6b83f4840499",
    "file_url": "https://lluclyumbgjzcfkuyblg.supabase.co/storage/v1/object/public/medical-reports/52f07a22-842c-4125-bfd0-6b83f4840499/1753612512085_1751759596736_Mahfouz_7_2_25.pdf",
    "diet_plan": "[TRUNCATED]",
    "blood_test": "[\"Vitamin D test\"]",
    "created_at": "2025-07-27T10:35:12.608384+00:00",
    "life_style": "[TRUNCATED]",
    "updated_at": "2025-07-29T02:03:15.594374+00:00",
    "description": null,
    "doctor_name": null,
    "report_date": "2025-07-27",
    "hospital_name": null,
    "summary_status": "pending",
    "food_supplement": "[\"Glutathione 250mg Once daily\",\"Vit D 10000 IU - Once daily\"]",
    "life_recommendation": "[TRUNCATED]",
    "summary_generated_at": null
  }
}
EOF

# Send the POST request
curl -X POST "$WEBHOOK_URL" \
  -H "Content-Type: application/json" \
  -d @payload.json


echo "ðŸ§ª Testing Medical Report Webhook..."

# Test payload with all parameters
PAYLOAD='{
      "type": "UPDATE",
      "table": "medical_reports",
      "record": {
        "id": "627cc941-e6e9-4b56-abc2-e2d9fb475e26",
        "title": "1751759596736_Mahfouz_7_2_25",
        "status": "completed",
        "iv_drip": "Detox Drip 750 ml ff ffv",
        "summary": null,
        "user_id": "52f07a22-842c-4125-bfd0-6b83f4840499",
        "file_url": "https://lluclyumbgjzcfkuyblg.supabase.co/storage/v1/object/public/medical-reports/52f07a22-842c-4125-bfd0-6b83f4840499/1753612512085_1751759596736_Mahfouz_7_2_25.pdf",
        "diet_plan": "{\"foodToAvoidInDiet\":{\"case\":\"foods to avoid from your diet\",\"title\":\"Foods to avoid from your diet\",\"listValues\":[\"French fries\",\"Rice cooked with butter\",\"Butter crackers\",\"Ready-to-eat cakes\",\"White bread\",\"Full fat dairies\",\"Sweetened yogurt\",\"Juices\",\"Fried chicken, meat, and fish\",\"Fried nuts\",\"Hydrogenated oil\",\"Fried vegetables\"]},\"foodToAddInDiet\":{\"case\":\"foods to add to your diet\",\"title\":\"Foods to add to your diet\",\"listValues\":[\"Potatoes\",\"Rice\",\"Oats\",\"Rice cakes\",\"Toasts\",\"Skimmed milk\",\"Fat-free yogurt\",\"Fruits\",\"Boiled/grilled/steamed chicken, meat, and fish\",\"Raw nuts\",\"Olive oil\",\"Avocado\",\"Fresh vegetables\"]},\"generalRecommendation\":{\"case\":\"general recommendation\",\"title\":\"General Recommendation\",\"objValues\":[{\"key\":\"water\",\"value\":\"Drink 1.5-2L of water daily\"},{\"key\":\"watch\",\"value\":\"Take all your meals in specific time each day\"},{\"key\":\"riceCooker\",\"value\":\"Cook your meals with minimum oil, without using butter\"},{\"key\":\"salt\",\"value\":\"Limit your added salt intake\"},{\"key\":\"scale\",\"value\":\"Measure your meals to get the exact calories needed\"}]},\"teaIntake\":{\"case\":\"tea intake\",\"title\":\"You may take the following\",\"objValues\":[{\"key\":\"coffee\",\"value\":\"1 cup of coffee (espresso) without added sugar\"}]},\"breakfastChoices\":{\"case\":\"breakfast choices\",\"title\":\"Breakfast Choices\",\"mandatoryValues\":[\"3 dates\"],\"listValues\":[[\"\",\"2 toasts (preferably brown or whole grains) + 1 whole egg+ 4 egg whites + veggies\"],[\"\",\"1.5 cup of boiled lentils (lime and garlic can be added) + 1tsp of olive oil+ veggies\"],[\"\",\"1.5 cup of boiled Chickpeas (lime and garlic can be added) + 1tsp of olive oil+ veggies\"],[\"\",\"2 toasts (preferably brown or whole grains) + 90 grams of turkey breast (2 slices) + 5 olives + veggies\"],[\"\",\"2 toasts or 6 medium-sized rice cakes + 90 grams of low-fat white cheese + veggies\"],[\"\",\"1.5 cup of skimmed milk+ 1/2 cup of ready-to-eat oats+ 1 tsp of honey\"],[\"\",\"6 egg whites+ 170 grams boiled potato (medium size) + 1 tsp olive oil + veggies\"]]},\"lunchChoices\":{\"case\":\"lunch choices\",\"title\":\"Lunch Choices\",\"mandatoryValues\":[\"1 cup of salad with 1 tsp of olive oil\",\"1 cup of zero fat yogurt\"],\"listValues\":[[\"Meat Stuffed Zucchini\",\"4 meat stuffed zucchini\",\"120g cooked lean meat\",\"1.5 cup of boiled rice\"],[\"Fish and Potato\",\"150g fish fillet/Salmon/Sardines (boiled or grilled with spices)\",\"2 medium boiled or grilled potato (340g)\"],[\"Mloukheye/ Spinach Stew\",\"2 cups of Mloukheye/ Spinach\",\"1.5 cup of rice (preferably brown)\",\"150g lean meat or chicken breast (boiled with spices)\"],[\"Stuffed Artichoke\",\"2 meat stuffed Artichoke\",\"90g steak with spices\",\"1.5 cup of boiled rice\"],[\"Shish Tawouk/Kafta\",\"4 shish of tawouk (150g) (without added ketchup to the seasoning) or kafta (150g)\",\"2 medium boiled or grilled potato (340 g)\",\"1 T of hummus with tahini\"],[\"Moujadara/Mudardara\",\"3 cups of Moujadara\"],[\"Meat or Chicken Freek (roasted wheat)\",\"2 cup of freek (done with oil not with butter)\",\"150g chicken breast or lean meat (grilled or boiled)\"],[\"Chicken Kabseh\",\"1.5 cup of rice (boiled with spices)\",\"150g chicken breast (1tsp of oil can be added)\"],[\"Fish Sayedieh\",\"1.5 cup of rice (boiled with spices)\",\"150g fish fillet (1 tsp of olive oil can be added)\"],[\"Bamya/ Loubya Stew\",\"2 cups of Bamya/ Loubya\",\"1.5 cup of rice (preferably brown)\",\"150g lean meat or chicken breast (boiled with spices)\"],[\"Kibbeh in oven pan\",\"150g kibbeh\",\"1.5 medium boiled or grilled potato (170g)\"],[\"Grilled meat\",\"150g grilled meat (12 medium cubes) with spices\",\"2 medium boiled or grilled potato(340g)\",\"1 T of hummus with tahini\"],[\"Marinated Chicken\",\"150g chicken with added spices\",\"1.5 cup of brown rice\"],[\"Meat Steak\",\"150g lean meat with added spices\",\"2 medium boiled or grilled potato(340g)\"]]},\"snackChoices\":{\"case\":\"snack choices\",\"title\":\"Snacks to be taken through out the day\",\"listValues\":[[\"Choose one from following: \",\"1 toast or 3 rice cake+ 1 T peanut butter + 3 (almonds or cashews) + 1 fruit of your choice\",\"1/2 avocado (4 T) + 1 T of honey+ 1 fruit of your choice\",\"16 pistachios+ 4 almonds+ 4 cashews+ 1 T of honey+ 1 fruit of your choice\"],[\"Choose one from the following: \",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 3 bowls of air-popped popcorn\",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 1 T of honey\",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 1 cup of light jello\"]]},\"fruitsChoices\":{\"case\":\"fruit choices\",\"title\":\"Fruits List Table\",\"objValues\":[{\"key\":\"apple\",\"value\":\"1 small apple 104g\"},{\"key\":\"loquats\",\"value\":\"10 medium loquats 115g\"},{\"key\":\"apricot\",\"value\":\"4 medium apricots 140g\"},{\"key\":\"banana\",\"value\":\"1 small banana 81g\"},{\"key\":\"cherries\",\"value\":\"12 pieces cherries 82g\"},{\"key\":\"figs\",\"value\":\"2 medium figs 100 g\"},{\"key\":\"guava\",\"value\":\"2 small or 1 medium guava 100g\"},{\"key\":\"kiwi\",\"value\":\"1 large kiwi 91g\"},{\"key\":\"mango\",\"value\":\"1/2 small mango 104g\"},{\"key\":\"pear\",\"value\":\"1/2 small pear 104g\"},{\"key\":\"pineapple\",\"value\":\"0.5 cup pineapple 116g\"},{\"key\":\"persimmon\",\"value\":\"1 small persimmon 85g\"},{\"key\":\"cactus\",\"value\":\"1 small or 1/2 medium cactus 150g\"},{\"key\":\"tangerine\",\"value\":\"2 small tangerine 152g\"},{\"key\":\"pomegranate\",\"value\":\"1/2 medium pomegranate 80g\"},{\"key\":\"grapes\",\"value\":\"17 small grapes 85g\"},{\"key\":\"peach\",\"value\":\"1 medium peach 147g\"},{\"key\":\"strawberries\",\"value\":\"1 and 1/4 cup or 9 pieces strawberries 190g\"},{\"key\":\"jujube\",\"value\":\"1/2 cup jujube 75g\"},{\"key\":\"custardApple\",\"value\":\"1/3 medium custard apple 60g\"},{\"key\":\"quince\",\"value\":\"1 medium quince 100g\"},{\"key\":\"pomelo\",\"value\":\"3/4 cup pomelo 150g\"},{\"key\":\"watermelon\",\"value\":\"1.25 cup watermelon 190g\"},{\"key\":\"cantaloupe\",\"value\":\"1 cup cantaloupe 160\"},{\"key\":\"grapeFruit\",\"value\":\"1/5 grapefruit 166g\"},{\"key\":\"blackberries\",\"value\":\"0.75 cup blackberries 108g\"},{\"key\":\"blueberries\",\"value\":\"0.75 cup blueberries 108g\"},{\"key\":\"dates\",\"value\":\"3 dates 25g\"},{\"key\":\"orange\",\"value\":\"1 medium orange 131g\"},{\"key\":\"papaya\",\"value\":\"1 cup papaya 140g\"},{\"key\":\"plum\",\"value\":\"2 plums 132g\"},{\"key\":\"raspberries\",\"value\":\"1 cup raspberries 123g\"}]},\"dinnerChoices\":{\"case\":\"dinner choices\",\"title\":\"Dinner Choices\",\"listValues\":[[\"Tuna Pasta Salad\",\"120g tuna in water+ 1 cup boiled pasta+ 1 tsp of olive oil+ 2 cups of veggies+ lemon juice\"],[\"Chicken Caeser Salad\",\"120g of grilled chicken breast+ 2 cups of veggies+ lemon juice+1T light mayonnaise+ 1 chopped and grilled toast+ 1/4 cup of corn\"],[\"\",\"2 toast (brown or whole wheat) + 120 g of turkey+ veggies+ 5 olives\"],[\"\",\"3 rice cakes+ 1 toast + 1 whole egg+ 6 egg whites + veggies\"],[\"\",\"2 toast (brown or whole wheat) + 120 g of white low-fat cheese+ 5 olives+ veggies\"],[\"Greek salad\",\"120g light feta cheese+ 5 olives+ 2 cups of veggies+ 1 cup of zero fat yogurt\"],[\"\",\"120g salmon+ 1 medium boiled or grilled potato (170g) + 1 cup of salad (veggies+ 1 tsp of olive oil)\"]]},\"veggiesToAdd\":{\"case\":\"veggies to add\",\"title\":\"Veggies to add\",\"listValues\":[\"Tomato\",\"Cucumber\",\"Mint\",\"Peppers\",\"Lettuce\",\"Iceberg\",\"Cabbage\",\"Onion\",\"Garlic\",\"Broccoli\",\"Carrots\",\"Cauliflower\",\"Celery\",\"Swiss chard\",\"Kale\",\"Leeks\",\"Mushroom\",\"Radish\",\"Cherry tomatoes\"]}}",
        "blood_test": "[\"Vitamin D test\"]",
        "created_at": "2025-07-27T10:35:12.608384+00:00",
        "life_style": "[\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Heavy metals and detoxification rate some how disturbed</strong></p><p>Exposure to toxins in your daily life is unavoidable. Though not always immediately harmful, these substances can be found in a variety of places, from food to soaps to the environment. When toxins build up in our body, it can affect you in ways you may not realize</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>Fatigue.</li><li>Joints pain.</li><li>Chemical sensitivity.</li><li>Brain fog.</li><li>Low energy.</li><li>Constipation.</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Steps to detoxification.</strong></p><ul><li>Eat Enough Protein at Every Meal.</li><li>Get plenty of restorative sleep.</li><li>Plan your meals with good nutrition in mind. Whole grains, fresh fruits and vegetables. Avoid processed and pre-packaged foods.</li><li>Adapt a stress management technique such as yoga, meditation.</li><li>Physical activity heightens.</li><li>Avoid bad behaviors like smoking, drinking alcohol.</li><li>Drink plenty of water.</li><li>Take a sauna or a hot bath regularly.</li><li>Reduce exposure to toxic elements.</li></ul>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to metabolism some how disturbed: slow metabolism expected </strong></p><p>The minerals involved by balancing the glucose and carbohydrate metabolism are disturbed which lead for progress of low metabolism and insulin resistant.</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>Weight Gain.</li><li>Fatigue.</li><li>Insulin resistant.</li><li>Sugar Cravings.</li><li>Difficulty loosing weight.</li><li>Headache</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Improve metabolism</strong></p><ul><li>Eat Plenty of Protein at Every Meal.</li><li>Eating food can increase your metabolism for a few hours.</li><li>Drink More Water.</li><li>Do a High-Intensity Workout.</li><li>Lift Heavy Things.</li><li>Stand up More.</li><li>Eat Spicy Foods.</li><li>Get a Good Nights Sleep</li></ul>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to nutrients absorption in the GI some how disturbed: Weak Absorption expected</strong></p><p>Symptoms of malabsorption syndrome are caused when unabsorbed nutrients pass through the digestive tract. Many symptoms differ depending on the specific nutrient or nutrients that arent being absorbed properly. Other symptoms are a result of a deficiency of that nutrient, which is caused by its poor absorption.</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>vomiting</li><li>Nausea</li><li>bloating</li><li>diarrhea</li><li>muscle wasting</li><li>weight loss or weight gain</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Boost absorption</strong></p><ul><li>Eat a variety of foods in one meal slowly.</li><li>Pair vitamin C-rich foods with iron.</li><li>Include healthy fats with each meal.</li><li>Take a probiotic.</li><li>Avoid drinking tea at mealtimes.</li></ul><h3><br></h3>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to the health of joints and muscle some how disturbed</strong></p><p>In addition to calcium, vitamin D, vitamin K and omega-3 fatty acids, several other vitamins and minerals, including magnesium, silicon, vitamin C, and boron have been linked to improved bone and joint strength, according to a study published in The Open Orthopedics Journal</p><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Improve your joint health</strong></p><ul><li>Keep Moving.</li><li>Protect Your Joints.</li><li>Maintain Your Ideal Weight.</li><li>Do Low-Impact Exercises.</li><li>Strengthen Your Muscles.</li><li>Try Range-of-Motion Exercises.</li></ul>\"]",
        "updated_at": "2025-07-29T02:05:23.701239+00:00",
        "description": null,
        "doctor_name": null,
        "report_date": "2025-07-27",
        "hospital_name": null,
        "summary_status": "pending",
        "food_supplement": "[\"Glutathione 250mg Once daily\",\"Vit D 10000 IU - Once daily\"]",
        "life_recommendation": "[{\"title\":\"MINERAL\",\"recommendation\":[\"<p><strong>Phosphorus Borderline Deficiency</strong></p><p><strong>S &amp; S include:</strong></p><p>Tooth decay, Fatigue, Vit D deficiency, Muscle weakness</p><p><strong>Phosphorus sources:</strong></p><p>Meats, Poultry, Fish, Nuts, Beans</p>\",\"<p><strong>Chromium Borderline Deficiency</strong></p><p><strong>S&amp; S include: </strong></p><p>Weight gain, Fatigue.Metabolism weakness</p><p><strong>Chromium sources:</strong></p><p>Broccoli, Potatoes, Green beans.Beef and Poultry. Bananas, Grape Juice.</p>\",\"<p><strong>Fluoride Border line Deficiency </strong></p><p><strong>S &amp; S include: </strong></p><p>Tooth decay, Cavities</p><p><strong> Fluoride sources: </strong></p><p>Crab , Oysters, Potatoes., Toothpaste, Black tea.</p>\"]},{\"title\":\"RATIOS\",\"recommendation\":[\"<p><strong>Ca/P Unbalanced ratio: </strong></p><p><strong>S&amp;S may include:</strong></p><p>Vit D Deficiency, Parathyroid ,Poor usage of Calcium</p>\",\"<p><strong>K/Na Unbalanced ratio: </strong></p><p><strong>S&amp;S may include:</strong></p><p>Excess consumption of salt, Inflammation, Chronic stress</p>\"]},{\"title\":\"HEAVY METAL\",\"recommendation\":[\"<p><strong>Cadmium Very High</strong></p><p><strong>S &amp; S Include:</strong></p><p>Bronchitis, bone fractures, immunity weakness,Slow wound healing</p><p><strong>Sources</strong>:</p><p>Cigarette , car exhaust fume ,instant coffee , Oud incense ,paint,chocolate.</p>\",\"<p><strong>Mercury Very High</strong></p><p><strong>Sources:</strong></p><p>Dental amalgams. Tuna fish,Medication.Plastic , Ink and Paint</p><p><strong>S &amp; S Include:</strong></p><p>Muscle weakness, fatigue,Stomach ache.</p>\"]},{\"title\":\"VITAMINS\",\"recommendation\":[\"<p><strong>Vitamin D - Insufficiency </strong></p><p><strong>S &amp; S include:</strong></p><p>Getting sick or infected often. Fatigue and tiredness. Bone and back pain. Depression. Impaired wound healing. Bone loss. Hair loss. Muscle pain.</p><p><strong>Vitamin D sources:</strong></p><p>Tuna, mackerel, and salmon. Dairy products, Orange juice, Soy milk, and Cereals. Beef liver. Cheese. Egg yolks.</p>\"]}]",
        "summary_generated_at": null
      },
      "schema": "public",
      "old_record": {
        "id": "627cc941-e6e9-4b56-abc2-e2d9fb475e26",
        "title": "1751759596736_Mahfouz_7_2_25",
        "status": "completed",
        "iv_drip": "Detox Drip 750 ml ff ffvgfgfgbgbv jjjjj njnjbj jjjjj",
        "summary": null,
        "user_id": "52f07a22-842c-4125-bfd0-6b83f4840499",
        "file_url": "https://lluclyumbgjzcfkuyblg.supabase.co/storage/v1/object/public/medical-reports/52f07a22-842c-4125-bfd0-6b83f4840499/1753612512085_1751759596736_Mahfouz_7_2_25.pdf",
        "diet_plan": "{\"foodToAvoidInDiet\":{\"case\":\"foods to avoid from your diet\",\"title\":\"Foods to avoid from your diet\",\"listValues\":[\"French fries\",\"Rice cooked with butter\",\"Butter crackers\",\"Ready-to-eat cakes\",\"White bread\",\"Full fat dairies\",\"Sweetened yogurt\",\"Juices\",\"Fried chicken, meat, and fish\",\"Fried nuts\",\"Hydrogenated oil\",\"Fried vegetables\"]},\"foodToAddInDiet\":{\"case\":\"foods to add to your diet\",\"title\":\"Foods to add to your diet\",\"listValues\":[\"Potatoes\",\"Rice\",\"Oats\",\"Rice cakes\",\"Toasts\",\"Skimmed milk\",\"Fat-free yogurt\",\"Fruits\",\"Boiled/grilled/steamed chicken, meat, and fish\",\"Raw nuts\",\"Olive oil\",\"Avocado\",\"Fresh vegetables\"]},\"generalRecommendation\":{\"case\":\"general recommendation\",\"title\":\"General Recommendation\",\"objValues\":[{\"key\":\"water\",\"value\":\"Drink 1.5-2L of water daily\"},{\"key\":\"watch\",\"value\":\"Take all your meals in specific time each day\"},{\"key\":\"riceCooker\",\"value\":\"Cook your meals with minimum oil, without using butter\"},{\"key\":\"salt\",\"value\":\"Limit your added salt intake\"},{\"key\":\"scale\",\"value\":\"Measure your meals to get the exact calories needed\"}]},\"teaIntake\":{\"case\":\"tea intake\",\"title\":\"You may take the following\",\"objValues\":[{\"key\":\"coffee\",\"value\":\"1 cup of coffee (espresso) without added sugar\"}]},\"breakfastChoices\":{\"case\":\"breakfast choices\",\"title\":\"Breakfast Choices\",\"mandatoryValues\":[\"3 dates\"],\"listValues\":[[\"\",\"2 toasts (preferably brown or whole grains) + 1 whole egg+ 4 egg whites + veggies\"],[\"\",\"1.5 cup of boiled lentils (lime and garlic can be added) + 1tsp of olive oil+ veggies\"],[\"\",\"1.5 cup of boiled Chickpeas (lime and garlic can be added) + 1tsp of olive oil+ veggies\"],[\"\",\"2 toasts (preferably brown or whole grains) + 90 grams of turkey breast (2 slices) + 5 olives + veggies\"],[\"\",\"2 toasts or 6 medium-sized rice cakes + 90 grams of low-fat white cheese + veggies\"],[\"\",\"1.5 cup of skimmed milk+ 1/2 cup of ready-to-eat oats+ 1 tsp of honey\"],[\"\",\"6 egg whites+ 170 grams boiled potato (medium size) + 1 tsp olive oil + veggies\"]]},\"lunchChoices\":{\"case\":\"lunch choices\",\"title\":\"Lunch Choices\",\"mandatoryValues\":[\"1 cup of salad with 1 tsp of olive oil\",\"1 cup of zero fat yogurt\"],\"listValues\":[[\"Meat Stuffed Zucchini\",\"4 meat stuffed zucchini\",\"120g cooked lean meat\",\"1.5 cup of boiled rice\"],[\"Fish and Potato\",\"150g fish fillet/Salmon/Sardines (boiled or grilled with spices)\",\"2 medium boiled or grilled potato (340g)\"],[\"Mloukheye/ Spinach Stew\",\"2 cups of Mloukheye/ Spinach\",\"1.5 cup of rice (preferably brown)\",\"150g lean meat or chicken breast (boiled with spices)\"],[\"Stuffed Artichoke\",\"2 meat stuffed Artichoke\",\"90g steak with spices\",\"1.5 cup of boiled rice\"],[\"Shish Tawouk/Kafta\",\"4 shish of tawouk (150g) (without added ketchup to the seasoning) or kafta (150g)\",\"2 medium boiled or grilled potato (340 g)\",\"1 T of hummus with tahini\"],[\"Moujadara/Mudardara\",\"3 cups of Moujadara\"],[\"Meat or Chicken Freek (roasted wheat)\",\"2 cup of freek (done with oil not with butter)\",\"150g chicken breast or lean meat (grilled or boiled)\"],[\"Chicken Kabseh\",\"1.5 cup of rice (boiled with spices)\",\"150g chicken breast (1tsp of oil can be added)\"],[\"Fish Sayedieh\",\"1.5 cup of rice (boiled with spices)\",\"150g fish fillet (1 tsp of olive oil can be added)\"],[\"Bamya/ Loubya Stew\",\"2 cups of Bamya/ Loubya\",\"1.5 cup of rice (preferably brown)\",\"150g lean meat or chicken breast (boiled with spices)\"],[\"Kibbeh in oven pan\",\"150g kibbeh\",\"1.5 medium boiled or grilled potato (170g)\"],[\"Grilled meat\",\"150g grilled meat (12 medium cubes) with spices\",\"2 medium boiled or grilled potato(340g)\",\"1 T of hummus with tahini\"],[\"Marinated Chicken\",\"150g chicken with added spices\",\"1.5 cup of brown rice\"],[\"Meat Steak\",\"150g lean meat with added spices\",\"2 medium boiled or grilled potato(340g)\"]]},\"snackChoices\":{\"case\":\"snack choices\",\"title\":\"Snacks to be taken through out the day\",\"listValues\":[[\"Choose one from following: \",\"1 toast or 3 rice cake+ 1 T peanut butter + 3 (almonds or cashews) + 1 fruit of your choice\",\"1/2 avocado (4 T) + 1 T of honey+ 1 fruit of your choice\",\"16 pistachios+ 4 almonds+ 4 cashews+ 1 T of honey+ 1 fruit of your choice\"],[\"Choose one from the following: \",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 3 bowls of air-popped popcorn\",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 1 T of honey\",\"2 fruit + 1 cup of espresso/tea/herbals (no added sugar) + 1 cup of light jello\"]]},\"fruitsChoices\":{\"case\":\"fruit choices\",\"title\":\"Fruits List Table\",\"objValues\":[{\"key\":\"apple\",\"value\":\"1 small apple 104g\"},{\"key\":\"loquats\",\"value\":\"10 medium loquats 115g\"},{\"key\":\"apricot\",\"value\":\"4 medium apricots 140g\"},{\"key\":\"banana\",\"value\":\"1 small banana 81g\"},{\"key\":\"cherries\",\"value\":\"12 pieces cherries 82g\"},{\"key\":\"figs\",\"value\":\"2 medium figs 100 g\"},{\"key\":\"guava\",\"value\":\"2 small or 1 medium guava 100g\"},{\"key\":\"kiwi\",\"value\":\"1 large kiwi 91g\"},{\"key\":\"mango\",\"value\":\"1/2 small mango 104g\"},{\"key\":\"pear\",\"value\":\"1/2 small pear 104g\"},{\"key\":\"pineapple\",\"value\":\"0.5 cup pineapple 116g\"},{\"key\":\"persimmon\",\"value\":\"1 small persimmon 85g\"},{\"key\":\"cactus\",\"value\":\"1 small or 1/2 medium cactus 150g\"},{\"key\":\"tangerine\",\"value\":\"2 small tangerine 152g\"},{\"key\":\"pomegranate\",\"value\":\"1/2 medium pomegranate 80g\"},{\"key\":\"grapes\",\"value\":\"17 small grapes 85g\"},{\"key\":\"peach\",\"value\":\"1 medium peach 147g\"},{\"key\":\"strawberries\",\"value\":\"1 and 1/4 cup or 9 pieces strawberries 190g\"},{\"key\":\"jujube\",\"value\":\"1/2 cup jujube 75g\"},{\"key\":\"custardApple\",\"value\":\"1/3 medium custard apple 60g\"},{\"key\":\"quince\",\"value\":\"1 medium quince 100g\"},{\"key\":\"pomelo\",\"value\":\"3/4 cup pomelo 150g\"},{\"key\":\"watermelon\",\"value\":\"1.25 cup watermelon 190g\"},{\"key\":\"cantaloupe\",\"value\":\"1 cup cantaloupe 160\"},{\"key\":\"grapeFruit\",\"value\":\"1/5 grapefruit 166g\"},{\"key\":\"blackberries\",\"value\":\"0.75 cup blackberries 108g\"},{\"key\":\"blueberries\",\"value\":\"0.75 cup blueberries 108g\"},{\"key\":\"dates\",\"value\":\"3 dates 25g\"},{\"key\":\"orange\",\"value\":\"1 medium orange 131g\"},{\"key\":\"papaya\",\"value\":\"1 cup papaya 140g\"},{\"key\":\"plum\",\"value\":\"2 plums 132g\"},{\"key\":\"raspberries\",\"value\":\"1 cup raspberries 123g\"}]},\"dinnerChoices\":{\"case\":\"dinner choices\",\"title\":\"Dinner Choices\",\"listValues\":[[\"Tuna Pasta Salad\",\"120g tuna in water+ 1 cup boiled pasta+ 1 tsp of olive oil+ 2 cups of veggies+ lemon juice\"],[\"Chicken Caeser Salad\",\"120g of grilled chicken breast+ 2 cups of veggies+ lemon juice+1T light mayonnaise+ 1 chopped and grilled toast+ 1/4 cup of corn\"],[\"\",\"2 toast (brown or whole wheat) + 120 g of turkey+ veggies+ 5 olives\"],[\"\",\"3 rice cakes+ 1 toast + 1 whole egg+ 6 egg whites + veggies\"],[\"\",\"2 toast (brown or whole wheat) + 120 g of white low-fat cheese+ 5 olives+ veggies\"],[\"Greek salad\",\"120g light feta cheese+ 5 olives+ 2 cups of veggies+ 1 cup of zero fat yogurt\"],[\"\",\"120g salmon+ 1 medium boiled or grilled potato (170g) + 1 cup of salad (veggies+ 1 tsp of olive oil)\"]]},\"veggiesToAdd\":{\"case\":\"veggies to add\",\"title\":\"Veggies to add\",\"listValues\":[\"Tomato\",\"Cucumber\",\"Mint\",\"Peppers\",\"Lettuce\",\"Iceberg\",\"Cabbage\",\"Onion\",\"Garlic\",\"Broccoli\",\"Carrots\",\"Cauliflower\",\"Celery\",\"Swiss chard\",\"Kale\",\"Leeks\",\"Mushroom\",\"Radish\",\"Cherry tomatoes\"]}}",
        "blood_test": "[\"Vitamin D test\"]",
        "created_at": "2025-07-27T10:35:12.608384+00:00",
        "life_style": "[\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Heavy metals and detoxification rate some how disturbed</strong></p><p>Exposure to toxins in your daily life is unavoidable. Though not always immediately harmful, these substances can be found in a variety of places, from food to soaps to the environment. When toxins build up in our body, it can affect you in ways you may not realize</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>Fatigue.</li><li>Joints pain.</li><li>Chemical sensitivity.</li><li>Brain fog.</li><li>Low energy.</li><li>Constipation.</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Steps to detoxification.</strong></p><ul><li>Eat Enough Protein at Every Meal.</li><li>Get plenty of restorative sleep.</li><li>Plan your meals with good nutrition in mind. Whole grains, fresh fruits and vegetables. Avoid processed and pre-packaged foods.</li><li>Adapt a stress management technique such as yoga, meditation.</li><li>Physical activity heightens.</li><li>Avoid bad behaviors like smoking, drinking alcohol.</li><li>Drink plenty of water.</li><li>Take a sauna or a hot bath regularly.</li><li>Reduce exposure to toxic elements.</li></ul>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to metabolism some how disturbed: slow metabolism expected </strong></p><p>The minerals involved by balancing the glucose and carbohydrate metabolism are disturbed which lead for progress of low metabolism and insulin resistant.</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>Weight Gain.</li><li>Fatigue.</li><li>Insulin resistant.</li><li>Sugar Cravings.</li><li>Difficulty loosing weight.</li><li>Headache</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Improve metabolism</strong></p><ul><li>Eat Plenty of Protein at Every Meal.</li><li>Eating food can increase your metabolism for a few hours.</li><li>Drink More Water.</li><li>Do a High-Intensity Workout.</li><li>Lift Heavy Things.</li><li>Stand up More.</li><li>Eat Spicy Foods.</li><li>Get a Good Nights Sleep</li></ul>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to nutrients absorption in the GI some how disturbed: Weak Absorption expected</strong></p><p>Symptoms of malabsorption syndrome are caused when unabsorbed nutrients pass through the digestive tract. Many symptoms differ depending on the specific nutrient or nutrients that arent being absorbed properly. Other symptoms are a result of a deficiency of that nutrient, which is caused by its poor absorption.</p><p><strong style=\\\"color: rgb(51, 102, 255);\\\">Symptoms</strong><span style=\\\"color: rgb(51, 102, 255);\\\">:</span></p><ul><li>vomiting</li><li>Nausea</li><li>bloating</li><li>diarrhea</li><li>muscle wasting</li><li>weight loss or weight gain</li></ul><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Boost absorption</strong></p><ul><li>Eat a variety of foods in one meal slowly.</li><li>Pair vitamin C-rich foods with iron.</li><li>Include healthy fats with each meal.</li><li>Take a probiotic.</li><li>Avoid drinking tea at mealtimes.</li></ul><h3><br></h3>\",\"<p><strong style=\\\"color: rgb(255, 0, 0);\\\">Minerals and Vitamines related to the health of joints and muscle some how disturbed</strong></p><p>In addition to calcium, vitamin D, vitamin K and omega-3 fatty acids, several other vitamins and minerals, including magnesium, silicon, vitamin C, and boron have been linked to improved bone and joint strength, according to a study published in The Open Orthopedics Journal</p><p><strong style=\\\"color: rgb(51, 153, 102);\\\">Improve your joint health</strong></p><ul><li>Keep Moving.</li><li>Protect Your Joints.</li><li>Maintain Your Ideal Weight.</li><li>Do Low-Impact Exercises.</li><li>Strengthen Your Muscles.</li><li>Try Range-of-Motion Exercises.</li></ul>\"]",
        "updated_at": "2025-07-29T02:03:15.594374+00:00",
        "description": null,
        "doctor_name": null,
        "report_date": "2025-07-27",
        "hospital_name": null,
        "summary_status": "pending",
        "food_supplement": "[\"Glutathione 250mg Once daily\",\"Vit D 10000 IU - Once daily\"]",
        "life_recommendation": "[{\"title\":\"MINERAL\",\"recommendation\":[\"<p><strong>Phosphorus Borderline Deficiency</strong></p><p><strong>S &amp; S include:</strong></p><p>Tooth decay, Fatigue, Vit D deficiency, Muscle weakness</p><p><strong>Phosphorus sources:</strong></p><p>Meats, Poultry, Fish, Nuts, Beans</p>\",\"<p><strong>Chromium Borderline Deficiency</strong></p><p><strong>S&amp; S include: </strong></p><p>Weight gain, Fatigue.Metabolism weakness</p><p><strong>Chromium sources:</strong></p><p>Broccoli, Potatoes, Green beans.Beef and Poultry. Bananas, Grape Juice.</p>\",\"<p><strong>Fluoride Border line Deficiency </strong></p><p><strong>S &amp; S include: </strong></p><p>Tooth decay, Cavities</p><p><strong> Fluoride sources: </strong></p><p>Crab , Oysters, Potatoes., Toothpaste, Black tea.</p>\"]},{\"title\":\"RATIOS\",\"recommendation\":[\"<p><strong>Ca/P Unbalanced ratio: </strong></p><p><strong>S&amp;S may include:</strong></p><p>Vit D Deficiency, Parathyroid ,Poor usage of Calcium</p>\",\"<p><strong>K/Na Unbalanced ratio: </strong></p><p><strong>S&amp;S may include:</strong></p><p>Excess consumption of salt, Inflammation, Chronic stress</p>\"]},{\"title\":\"HEAVY METAL\",\"recommendation\":[\"<p><strong>Cadmium Very High</strong></p><p><strong>S &amp; S Include:</strong></p><p>Bronchitis, bone fractures, immunity weakness,Slow wound healing</p><p><strong>Sources</strong>:</p><p>Cigarette , car exhaust fume ,instant coffee , Oud incense ,paint,chocolate.</p>\",\"<p><strong>Mercury Very High</strong></p><p><strong>Sources:</strong></p><p>Dental amalgams. Tuna fish,Medication.Plastic , Ink and Paint</p><p><strong>S &amp; S Include:</strong></p><p>Muscle weakness, fatigue,Stomach ache.</p>\"]},{\"title\":\"VITAMINS\",\"recommendation\":[\"<p><strong>Vitamin D - Insufficiency </strong></p><p><strong>S &amp; S include:</strong></p><p>Getting sick or infected often. Fatigue and tiredness. Bone and back pain. Depression. Impaired wound healing. Bone loss. Hair loss. Muscle pain.</p><p><strong>Vitamin D sources:</strong></p><p>Tuna, mackerel, and salmon. Dairy products, Orange juice, Soy milk, and Cereals. Beef liver. Cheese. Egg yolks.</p>\"]}]",
        "summary_generated_at": null
    }
  }'

echo "ðŸ“¤ Sending payload to webhook..."
echo "Payload: $PAYLOAD"
echo ""

# Make the request
curl -X POST \
  http://localhost:3000/api/v1/medical-report-webhook \
  -H "Content-Type: application/json" \
  -H "x-drself-auth: drself_sk_4e7b1c2f8a9d4e3b9f6a1b2c3d4e5f6a" \
  -d "$PAYLOAD" \
  -w "\n\nHTTP Status: %{http_code}\nTotal Time: %{time_total}s\n"

echo ""
echo "âœ… Test completed!" 